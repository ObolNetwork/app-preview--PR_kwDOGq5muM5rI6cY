"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1561],{20479:function(e,t,s){s.d(t,{N:function(){return SectionTitle}});var a=s(85893);s(67294);var i=s(61472);let SectionTitle=e=>{let{children:t}=e;return(0,a.jsx)(i.kC,{direction:"column",children:(0,a.jsx)(i.xv,{variant:"h4",children:t})})}},80988:function(e,t,s){s.d(t,{d:function(){return ClusterDetailsContainer}});var a=s(85893),i=s(61472),l=s(24967),r=s(67294);let LVectorIcon=()=>(0,a.jsx)("svg",{width:"61",height:"47",viewBox:"0 0 61 47",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{id:"Vector 1",d:"M1 0V46H61",stroke:"#667A80"})});var n=s(15497);let DefaultOrderIcon=()=>(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M12 5.83L15.17 9L16.58 7.59L12 3L7.40997 7.59L8.82997 9L12 5.83ZM12 18.17L8.82997 15L7.41997 16.41L12 21L16.59 16.41L15.17 15L12 18.17Z",fill:"#667A80"})}),ArrowDownIcon=()=>(0,a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M12 5.83L15.17 9L16.58 7.59L12 3L7.40997 7.59L8.82997 9L12 5.83Z",fill:"#E1E9EB"}),(0,a.jsx)("path",{d:"M8.82998 15L12 18.17L15.17 15L16.59 16.41L12 21L7.41998 16.41L8.82998 15Z",fill:"#667A80"})]}),ArrowUpIcon=()=>(0,a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M12 5.83L15.17 9L16.58 7.59L12 3L7.40997 7.59L8.82997 9L12 5.83Z",fill:"#667A80"}),(0,a.jsx)("path",{d:"M8.82998 15L12 18.17L15.17 15L16.59 16.41L12 21L7.41998 16.41L8.82998 15Z",fill:"#E1E9EB"})]}),o=(0,i.zo)("th",{width:"190px",textTransform:"none",pb:"$xs",height:"24px",variants:{sortable:{true:{"&:hover":{cursor:"pointer"}}}}}),InnerValidatorTh=e=>{let{sortable:t,requestSort:s,column:l,css:r,sortConfig:n,sortedColumnAccessor:d}=e;return(0,a.jsx)(o,{onClick:t?()=>s(l.accessorKey):void 0,css:r,sortable:t,children:(0,a.jsxs)(i.xu,{css:{display:"flex",color:"#667A80",fontFamily:"DM Sans",fontSize:"16px",fontWeight:"700",lineHeight:"24px",textAlign:"left"},children:[l.header,t&&n&&d===l.accessorKey?"asc"===n[l.accessorKey]?(0,a.jsx)(ArrowUpIcon,{}):(0,a.jsx)(ArrowDownIcon,{}):t?(0,a.jsx)(DefaultOrderIcon,{}):null]})})},d=(0,i.zo)("table",{borderCollapse:"collapse",borderStyle:"hidden",boxShadow:"none",width:"100%",tableLayout:"fixed","& thead":{color:"$body",fontWeight:"$bold",fontSize:"$3"},"& tr":{color:"$textLighter"}}),c=(0,i.zo)("thead",{borderRadius:0}),u=(0,i.zo)("td",{width:"190px",py:"$xs",fontSize:"$4"}),h=(0,i.zo)("tr",{mb:"$lg"}),InnerValidatorsTable=e=>{let{rows:t,columns:s,initialSorting:i="asc"}=e,[l,o]=(0,r.useState)({}),[x,p]=(0,r.useState)(t),[f,g]=(0,r.useState)("");(0,r.useEffect)(()=>{p(t)},[t]);let sortRows=(e,t)=>{let a=[...x],i=s.find(t=>t.accessorKey===e),l=null==i?void 0:i.sortAccessor;return a.sort((s,a)=>{let r=s[e],o=a[e];if(l&&(r=l(s),o=l(a)),(null==i?void 0:i.sortLevel)!=="single"&&(null==i?void 0:i.sortLevel)){if((null==i?void 0:i.sortLevel)==="multi"&&r.firstLevel===o.firstLevel){let s=(0,n.kd)(r[e],o[e],t);if(0!=s)return s}}else{let e=(0,n.kd)(r,o,t);if(0!=e)return e}return 0}),a},requestSort=e=>{let t=i;l&&"asc"===l[e]&&(t="desc");let s=sortRows(e,t);p(s),g(e),o(s=>({...s,[e]:t}))};return(0,a.jsxs)(d,{className:"table-tabs-header",children:[(0,a.jsx)(c,{children:(0,a.jsx)(h,{children:s.map((e,t)=>{let{css:i,sortable:r,...n}=e;return(0,a.jsx)(InnerValidatorTh,{sortable:r,requestSort:requestSort,column:n,css:{...i,paddingLeft:t===s.length-1?"40px":"0px"},sortConfig:l,sortedColumnAccessor:f},"inner-table-validator-".concat(t))})})}),(0,a.jsx)("tbody",{children:x.map((e,t)=>(0,a.jsx)(h,{children:s.map((t,i)=>(0,a.jsx)(u,{css:{paddingLeft:i===s.length-1?"40px":"0px",color:0===e[t.accessorKey]?"#667A80":"auto"},children:"effectiveness"===t.accessorKey?e[t.accessorKey]+"%":e[t.accessorKey]},"inner-table-validator-cell ".concat(i)))},"inner-table-validator-row ".concat(t)))})]})},x=[{accessorKey:"address",header:"Validators"},{accessorKey:"status",header:"Status",sortable:!0,sortAccessor:e=>{var t;return r.isValidElement(e.status)?(0,n.$s)((null===(t=e.status)||void 0===t?void 0:t.props).status):void 0},sortLevel:"single"},{accessorKey:"effectiveness",header:"Effectiveness",sortable:!0,sortAccessor:e=>{var t;return{firstLevel:r.isValidElement(e.status)?(0,n.$s)((null===(t=e.status)||void 0===t?void 0:t.props).status):void 0,effectiveness:Number((0,n.IN)(e.effectiveness||0))}},sortLevel:"multi"}],ExpandableSection=e=>{let{rowValidators:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.xu,{css:{overflowY:"auto",overflowX:"hidden",display:"flex",scrollbarWidth:"none",gap:"$sm",position:"absolute",top:0,height:"100%"},children:[(0,a.jsx)(i.xu,{css:{marginLeft:"36px",position:"relative"},children:(0,a.jsx)(LVectorIcon,{})}),(0,a.jsx)(i.xu,{css:{width:"551px",maxHeight:"312px",position:"relative",top:"$xl"},children:(0,a.jsx)(InnerValidatorsTable,{columns:x,rows:null==t?void 0:t.map(e=>({address:(0,a.jsx)(l.Os,{address:e.address}),status:e.status||"Pending",effectiveness:e.effectiveness||0}))})})]}),(0,a.jsx)(l.mT,{background:"linear-gradient(180deg, rgba(14, 24, 26, 0) 0%, #0E181A 100%)",width:"100%",height:"21px"})]})},CollapsedRowIcon=()=>(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M7 9.5L12 14.5L17 9.5H7Z",fill:"#E1E9EB"})}),ExpandedRowIcon=()=>(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M7 14.5L12 9.5L17 14.5H7Z",fill:"#E1E9EB"})});var p=s(92321),f=s(86105);let fetchValidatorsStatusMetrics=e=>{let t=0,s=0,a=0,i=0;return e.forEach(e=>{if(r.isValidElement(e.status)){var l,n,o,d;f.kC[(null===(l=e.status)||void 0===l?void 0:l.props).status]&&t++,f.av[(null===(n=e.status)||void 0===n?void 0:n.props).status]&&s++,f.CE[(null===(o=e.status)||void 0===o?void 0:o.props).status]&&a++,f.w5[(null===(d=e.status)||void 0===d?void 0:d.props).status]&&i++}}),{activeValidatorsCount:t,withdrawalPossibleCount:s,exitedValidatorsCount:a,exitingValidatorsCount:i}},formatValidatorsRewardsTable=e=>{let t=new Map,s=[];return e.forEach((e,s)=>{let a="".concat(e.withdrawalAddress,"-").concat(e.feeRecipient);t.has(a)||t.set(a,{withdrawalAddress:e.withdrawalAddress,feeRecipient:e.feeRecipient,index:s,validators:[]}),t.get(a).validators.push({address:e.address,status:e.status,effectiveness:e.effectiveness})}),t.forEach(e=>{s[e.index]={withdrawalAddress:e.withdrawalAddress,feeRecipient:e.feeRecipient,count:e.validators.length,validators:e.validators}}),{groupedWithdrawalConfigArray:s}},isConnectedAddressARecipientOrPrincipal=(e,t)=>e.some(e=>{var s;return(null==e?void 0:e.principalAddress)===t||(null==e?void 0:null===(s=e.accounts)||void 0===s?void 0:s.includes(t))}),duplicateSplittersData=(e,t)=>Object.values(e.reduce((e,s)=>{if(s){let{feeRecipientAddress:a,feeRecipientBalance:i,percentAllocations:l,accounts:r,userBalance:n}=s;if(n){let s=null==r?void 0:r.findIndex(e=>e===t),n=-1!==s?l[s]:null;e[a]?e[a].count+=1:e[a]={count:1,feeRecipientBalance:i,feeRecipientAddress:a,percentage:n}}}return e},{}));var g=s(1958),m=s(64529);let v=(0,m.Ue)(e=>({validatorsClaimInfo:[],unclaimedRewardsWarningFlag:!1,isAnyValidatorPendingActivation:!1,groupedWithdrawalConfigArray:[],userSplitMainBalance:0,claimTXHash:"",updateValidatorsClaimInfo:(t,s)=>e(e=>{let a=e.validatorsClaimInfo,i=[...a];return i[t]=s,{validatorsClaimInfo:i}}),updateUnclaimedRewardsWarningFlag:t=>e(()=>({unclaimedRewardsWarningFlag:t})),updateGroupedWithdrawalConfigArray:t=>e(()=>({groupedWithdrawalConfigArray:t})),updateIsAnyValidatorPendingActivation:t=>e(()=>({isAnyValidatorPendingActivation:t})),updateUserSplitMainBalance:t=>e(()=>({userSplitMainBalance:t})),updateClaimTXHash:t=>e(()=>({claimTXHash:t}))}));var w=s(76344),j=s(71852),b=s(37122),C=s(3601),y=s(15229),S=s(48497),E=s(83317);let claim=async e=>{let{validatorsClaimInfo:t,connectedAddress:s,config:a}=e;try{let e=await (0,S.oZ)({validatorsClaimInfo:t,connectedAddress:s,config:a});return{loading:!1,txHash:e,completed:!0,errorMessage:null}}catch(e){return console.log(e,"claim all error"),{loading:!1,errorMessage:e.message,txHash:null,completed:null}}},distribute=async e=>{let{validatorsClaimInfo:t,config:s}=e;try{let e=await (0,S.Sw)({validatorsClaimInfo:t,config:s});return{loading:!1,txDistributeHash:e,completed:!0,errorMessage:null}}catch(e){return console.log(e,"distribute all error"),{loading:!1,errorMessage:e.message,txDistributeHash:null,completed:null}}},getUserBalance=async e=>{let{splitter:t,userAddress:s,withdrawalBalance:a,owrAddressOrSplitter:i,config:l}=e,r="0",n=0,o="0x";if(s&&t.accounts&&t.percentAllocations){if(i===t.split){let e=await (0,S.vs)(s,t,l);r=Number(e).toString()}else{let e=await (0,E.s)(i,l),d=await (0,S.y2)(s,i,t,l);if(o=e.principalRecipient,Number(a)>=16&&e.principalRecipient===s){n=e.amountOfPrincipalStake;let t=Math.max(0,e.amountOfPrincipalStake-e.claimedPrincipalFunds),s=Math.max(0,Number(a)-e.fundsPendingWithdrawal);r=(Number(d)+Math.min(t,s)).toString()}else r=Number(d).toString()}}return{balance:r,principalAddress:o,amountOfPrincipalStake:n}},useClusterValidators=e=>{let{validators:t}=e,s=v(e=>e.updateGroupedWithdrawalConfigArray),a=(0,r.useMemo)(()=>{let e=[...t];e.sort((e,t)=>{if(r.isValidElement(e.status)&&r.isValidElement(t.status)){var s,a;let i=(0,n.$s)((null===(s=e.status)||void 0===s?void 0:s.props).status),l=(0,n.$s)((null===(a=t.status)||void 0===a?void 0:a.props).status);if(i<l)return 1;if(i>l)return -1;let r=(0,n.IN)(e.effectiveness),o=(0,n.IN)(t.effectiveness);return Number(o)-Number(r)}});let{groupedWithdrawalConfigArray:s}=formatValidatorsRewardsTable(e);return s},[t]);(0,r.useEffect)(()=>{a&&s(a)},[a,s])},useTotalClaimBalance=e=>{let{address:t}=(0,p.m)(),s=v(e=>e.userSplitMainBalance),a=v(e=>e.validatorsClaimInfo);if(e){let e=(null==a?void 0:a.reduce((e,t)=>e+((null==t?void 0:t.userBalance)||0),0))+s,i=duplicateSplittersData(a,t),l=i.reduce((e,t)=>e+t.feeRecipientBalance*(.01*t.percentage)*(t.count-1),0);return{totalBalanceWithoutDuplicate:e-l}}return{totalBalanceWithoutDuplicate:0}},useTotalDistributeBalance=e=>{let{address:t}=(0,p.m)(),s=v(e=>e.validatorsClaimInfo);if(!e){let e=null==s?void 0:s.reduce((e,t)=>(null==t?void 0:t.feeRecipientAddress)!==(null==t?void 0:t.withdrawalAddress)?e+((null==t?void 0:t.feeRecipientBalance)+(null==t?void 0:t.withdrawalBalance)||0):e+((null==t?void 0:t.feeRecipientBalance)||0),0),a=duplicateSplittersData(s,t),i=a.reduce((e,t)=>e+t.feeRecipientBalance*(t.count-1),0);return{totalContractsBalanceWithoutDuplicate:e-i}}return{totalContractsBalanceWithoutDuplicate:0}},useValidatorSplitterBalance=e=>{var t,s;let{rowConfig:a,rowIndex:i}=e,{address:l}=(0,p.m)(),n=v(e=>e.updateValidatorsClaimInfo),o=v(e=>e.updateUnclaimedRewardsWarningFlag),{activeValidatorsCount:d,withdrawalPossibleCount:c,exitedValidatorsCount:u,exitingValidatorsCount:h}=fetchValidatorsStatusMetrics(a.validators),x=Number(null===(s=(0,w.bv)(f.Kc,l).userEarnings)||void 0===s?void 0:null===(t=s.activeBalances[g.D])||void 0===t?void 0:t.formattedAmount)||0,m=v(e=>e.updateUserSplitMainBalance);(0,r.useEffect)(()=>{m(x)},[x,m]);let{isVerifiedSplitter:S}=(0,j.Z)(a.feeRecipient,a.withdrawalAddress,32*a.validators.length),{splitMetadata:E}=(0,w.rl)(f.Kc,a.feeRecipient),L=null==E?void 0:E.recipients.map(e=>e.recipient.address),T=null==E?void 0:E.recipients.map(e=>Number(e.ownership));console.log("splitMetadata in",a.feeRecipient,E);let A={accounts:L,percentAllocations:T,distributorFee:(null==E?void 0:E.distributorFeePercent)||f.Uu,split:null==E?void 0:E.address,controller:(null==E?void 0:E.controller)||g.D},{balance:$,withdrawalBalance:I,feeRecipientBalance:R,owrPrincipalAmount:B,principalAddress:k}=function(e,t,s,a){let i=(0,b.Z)(),[l,n]=(0,r.useState)("0"),[o,d]=(0,r.useState)(0),[c,u]=(0,r.useState)(null),[h,x]=(0,r.useState)(""),f=v(e=>e.claimTXHash),{chainId:g}=(0,p.m)(),{data:m}=(0,C.K)({address:s}),{data:w}=(0,C.K)({address:null==t?void 0:t.split}),j=a&&(null==t?void 0:t.split)&&m?(0,y.b)(m.value,m.decimals):"0",S=a&&(null==t?void 0:t.split)&&w?(0,y.b)(w.value,w.decimals):"0";return(0,r.useEffect)(()=>{f&&n("0")},[f]),(0,r.useEffect)(()=>{u(null);let fetchBalance=async()=>{try{let{balance:a,principalAddress:l,amountOfPrincipalStake:r}=await getUserBalance({splitter:t,userAddress:e,withdrawalBalance:j,owrAddressOrSplitter:s,chainId:g,config:i});n(a),d(r),x(l)}catch(e){u(e)}};s&&(null==t?void 0:t.accounts)&&a&&fetchBalance()},[e,s,t.split,a,g,j,t,i]),{balance:l,withdrawalBalance:j,feeRecipientBalance:S,principalAddress:h,owrPrincipalAmount:o,error:c}}(l,A,a.withdrawalAddress,S),M=Math.max(0,Number($)-x);return(0,r.useEffect)(()=>{if(S&&a){let e={withdrawalAddress:a.withdrawalAddress,feeRecipientAddress:a.feeRecipient,withdrawalBalance:Number(I),feeRecipientBalance:Number(R),userBalance:M,accounts:L,percentAllocations:T,distributorFee:A.distributorFee,controller:A.controller,principalAddress:k};n(i,e)}},[S,i,a,I,M,R,L,T,n,A.distributorFee,A.controller,k]),(0,r.useEffect)(()=>{a.withdrawalAddress!==a.feeRecipient&&h>0&&B>(d+c+u)*32&&o(!0)},[a,h,B,d,c,u,o]),{validatorUserBalance:M,principalAddress:k}};var L=s(90421);let T=(0,i.zo)("td",{py:"$sm",px:"$lg",color:"$body",fontSize:"$4",textOverflow:"ellipsis",whiteSpace:"nowrap",variants:{size:{sm:{width:"$3xl"}},textCenter:{true:{textAlign:"center"}}}}),A=(0,i.zo)("tr",{background:"#0E181A",height:"310px"}),ValidatorsTableTwoRowLayout=e=>{let{rowConfig:t,rowIndex:s,rowsLength:o}=e,{address:d}=(0,p.m)(),[c,u]=(0,r.useState)(!1),{validatorUserBalance:h,principalAddress:x}=useValidatorSplitterBalance({rowConfig:t,rowIndex:s}),handleToggle=()=>{u(!c)},f={withdrawalAddress:(0,a.jsx)(L.y,{connectedAddress:d,withdrawalAddress:t.withdrawalAddress,principalAddress:x}),feeRecipient:(0,n.VC)(d,t.feeRecipient)?(0,a.jsx)(l.Ze,{address:t.feeRecipient}):(0,a.jsx)(l.Ns,{address:t.feeRecipient}),validators:t.count,claimable:(h.toFixed(2)||0)+" ETH"};return(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)(R,{css:{borderBottom:s==o-1?"none":"2px solid $bg03","&:hover":{cursor:"pointer"}},onClick:()=>handleToggle(),children:V.map((e,t)=>(0,a.jsx)(T,{css:{color:"$light",textAlign:"left"},children:0===t?(0,a.jsxs)(i.kC,{css:{alignItems:"center"},children:[" ",c?(0,a.jsx)(ExpandedRowIcon,{}):(0,a.jsx)(CollapsedRowIcon,{})," ",(0,a.jsx)(i.xu,{children:f[e.accessorKey]})," "]}):f[e.accessorKey]},"outer-table-cell-".concat(t)))}),c&&(0,a.jsx)(A,{children:(0,a.jsx)("td",{colSpan:null==V?void 0:V.length,style:{position:"relative"},children:(0,a.jsx)(ExpandableSection,{rowValidators:t.validators})})})]},"outer-table-reactFragment-".concat(s))},$=(0,i.zo)("table",{borderCollapse:"collapse",width:"100%",boxShadow:"none",display:"table",tableLayout:"fixed","> thead":{color:"$body",textTransform:"uppercase",fontSize:"$3"},"& tr":{color:"$textLighter"}}),I=(0,i.zo)("th",{py:"$sm",px:"$lg",color:"$body",fontWeight:"500",fontSize:"$3",backgroundColor:"$bg03"}),R=(0,i.zo)("tr",{height:"54px"}),ValidatorsTable=()=>{let e=v(e=>e.groupedWithdrawalConfigArray);return(0,a.jsxs)($,{className:"table-tabs-header",children:[(0,a.jsx)("thead",{children:(0,a.jsx)(R,{children:V.map((e,t)=>{let{css:s,sortable:i,...l}=e;return(0,a.jsx)(I,{css:{...s,textAlign:"left"},children:l.header},"outer-table-header-".concat(t))})})}),(0,a.jsx)("tbody",{children:e.map((t,s)=>(0,a.jsx)(ValidatorsTableTwoRowLayout,{rowConfig:t,rowIndex:s,rowsLength:e.length},"outer-table-reactFragment-".concat(s)))})]})},TransactionButton=e=>{let{onClick:t,buttonText:s,css:r,status:n,disabled:o}=e;return(0,a.jsx)(l.fl,{variant:(null==n?void 0:n.loading)?"tx":void 0,color:"primary",type:"button",css:r,disabled:o,onClick:t,children:(null==n?void 0:n.loading)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.yC,{}),"Transaction in progress"]}):(0,a.jsxs)(a.Fragment,{children:[" ",s]})})},ClaimableAmountIcon=()=>(0,a.jsxs)("svg",{width:"18",height:"28",viewBox:"0 0 18 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("g",{opacity:"0.6",children:(0,a.jsx)("path",{opacity:"0.6",d:"M8.93714 10.3503L0 14.2596L8.93714 19.338L17.8708 14.2596L8.93714 10.3503Z",fill:"#D9EEF3"})}),(0,a.jsx)("g",{opacity:"0.45",children:(0,a.jsx)("path",{opacity:"0.45",d:"M0 14.2623L8.93714 19.3407V0.000183105L0 14.2623Z",fill:"#D9EEF3"})}),(0,a.jsx)("g",{opacity:"0.8",children:(0,a.jsx)("path",{opacity:"0.8",d:"M8.94116 0.000183105V19.3407L17.8748 14.2623L8.94116 0.000183105Z",fill:"#D9EEF3"})}),(0,a.jsx)("g",{opacity:"0.45",children:(0,a.jsx)("path",{opacity:"0.45",d:"M0 15.89L8.93714 27.9998V20.9684L0 15.89Z",fill:"#D9EEF3"})}),(0,a.jsx)("g",{opacity:"0.8",children:(0,a.jsx)("path",{opacity:"0.8",d:"M8.94116 20.9684V27.9998L17.8818 15.89L8.94116 20.9684Z",fill:"#D9EEF3"})})]}),CTA=e=>{let{status:t,txHash:s,amount:l,onClick:r,btnText:n,tooltipText:o}=e;return(0,a.jsx)(i.xu,{css:{alignContent:"center"},children:(null==t?void 0:t.completed)?(0,a.jsxs)(i.rU,{css:{fontSize:"$4",fontWeight:"$normal"},target:"_blank",href:"".concat(f.jX,"/tx/").concat(s),children:["View on Ethererscan",(0,a.jsx)(i._j,{color:"white",size:"sm"})]}):(0,a.jsxs)(i.kC,{css:{gap:"$lg",alignItems:"center"},children:[(0,a.jsxs)(i.kC,{css:{gap:"$xs",width:"fit-content"},children:[(0,a.jsx)(ClaimableAmountIcon,{}),(0,a.jsx)(i.xv,{css:{fontFamily:"DM Sans",fontSize:"$8",fontWeight:"$bold",lineHeight:"32px",textAlign:"left"},children:l})]}),(0,a.jsx)(i.KZ,{side:"top",content:o,children:(0,a.jsx)(i.xu,{css:{display:"flex"},children:(0,a.jsx)(TransactionButton,{status:t,css:{minWidth:"120px"},disabled:!l,onClick:r,buttonText:n})})})]})})},ValidatorsTableButtons=()=>{let e=(0,b.Z)(),{address:t}=(0,p.m)(),s=v(e=>e.validatorsClaimInfo),n=isConnectedAddressARecipientOrPrincipal(s,t),[o,d]=(0,r.useState)(),[c,u]=(0,r.useState)(""),h=v(e=>e.updateClaimTXHash),x=v(e=>e.updateUserSplitMainBalance),{totalBalanceWithoutDuplicate:f}=useTotalClaimBalance(n),g=(0,r.useCallback)(async()=>{var a;d(e=>({...e,loading:!0}));let i=await claim({validatorsClaimInfo:s.filter(e=>e),connectedAddress:t,config:e}),l="string"==typeof i.txHash?i.txHash:null===(a=i.txHash)||void 0===a?void 0:a.transactionHash;d({loading:!1,...i}),l&&(h(l),u(l),x(0))},[s,t,h,x,e]),[m,w]=(0,r.useState)(),[j,C]=(0,r.useState)(""),{totalContractsBalanceWithoutDuplicate:y}=useTotalDistributeBalance(n),S=(0,r.useCallback)(async()=>{var t;w(e=>({...e,loading:!0}));let a=await distribute({validatorsClaimInfo:s.filter(e=>e),config:e}),i="string"==typeof a.txDistributeHash?a.txDistributeHash:null===(t=a.txDistributeHash)||void 0===t?void 0:t.transactionHash;w({loading:!1,...a}),i&&C(i)},[s,e]);return null==f||Number.isNaN(f)?null:(0,a.jsxs)(i.kC,{css:{justifyContent:"flex-end",gap:"$md",justifyItems:"center"},children:[t&&n&&(0,a.jsx)(l.TT,{name:"showClaimSection",children:(0,a.jsx)(CTA,{status:o,amount:f,onClick:g,txHash:c,btnText:"Claim All",tooltipText:"The ether will be split and claimed."})}),t&&!n&&(0,a.jsx)(l.TT,{name:"showDistributeSection",children:(0,a.jsx)(CTA,{status:m,amount:y,onClick:S,txHash:j,btnText:"Distribute All",tooltipText:"The ether will be split and made claimable."})})]})},LabelWithTooltip=e=>{let{heading:t,content:s}=e;return(0,a.jsxs)(i.xu,{css:{alignItems:"center",gap:"$xxxs",display:"flex"},children:[t,(0,a.jsx)(i.KZ,{content:s,children:(0,a.jsx)(i.xu,{css:{display:"flex"},children:(0,a.jsx)(i.by,{})})})]})},B=(0,i.zo)(i.xu,{fontFamily:"inherit",display:"flex",alignItems:"center",color:"$light",justifyContent:"center",fontWeight:"$semibold",fontSize:"$8",lineHeight:"24px",flexShrink:0,gap:"$xl"}),k=(0,i.zo)(i.xu,{flexGrow:1}),M=[{accessorKey:"withdrawalAddress",header:(0,a.jsx)(LabelWithTooltip,{heading:"Withdrawal Address",content:"Address to receive skimming rewards and validator principal at exit."})},{accessorKey:"feeRecipient",header:(0,a.jsx)(LabelWithTooltip,{heading:"Fee Recipient",content:"Address to receive transaction fees from block proposals."})},{accessorKey:"validators",header:"Validators"}];(0,l.cr)("showClaimSection")&&M.push({accessorKey:"claimable",header:(0,a.jsx)(LabelWithTooltip,{heading:"Claimable",content:"The amount of ether available to claim."})});let V=M,ValidatorsTableWrapper=()=>{let e=v(e=>e.unclaimedRewardsWarningFlag);return(0,a.jsxs)(a.Fragment,{children:[e&&(0,a.jsx)(i.sQ,{heading:"There are unclaimed rewards that should be claimed before the exit completes."}),(0,a.jsx)(l.g_,{css:{".table-container":{"@sm":{width:"900px"}}},children:(0,a.jsxs)(i.W2,{layout:"column",alignItems:"start",className:"table-container",css:{padding:0,gap:0},children:[(0,a.jsxs)(i.kC,{css:{justifyContent:"space-between",alignItems:"center",padding:"$lg"},children:[(0,a.jsx)(B,{className:"container-heading",children:"Validators rewards"}),(0,a.jsx)(ValidatorsTableButtons,{})]}),(0,a.jsx)(k,{className:"validators-table-container",children:(0,a.jsx)(ValidatorsTable,{})})]})})]})},D=(0,i.zo)(i.kC,{flexDirection:"column",width:"auto",gap:"$2xl",px:"10%",py:"$5xl","@sm":{px:"10%",pb:"$5xl",pt:"$xl"}});var N=s(11163),O=s.n(N);let ExitButton=e=>{let{disabled:t,onClick:s}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.xv,{variant:"body",children:"Upon exiting the Validator you will be able to withdraw the original principle & claim all rewards"}),(0,a.jsx)(i.xv,{variant:"body",children:"but this validator will no longer earn rewards."}),(0,a.jsx)(i.zx,{color:"primary",type:"button",css:{width:"auto"},disabled:t,onClick:s,children:"Exit Validators"})]})},TransactionSection=e=>{let{icon:t,heading:s,children:l}=e;return(0,a.jsxs)(i.mh,{children:[(0,a.jsxs)(i.xu,{children:["successfully"===t&&(0,a.jsx)(i.nQ,{}),"loading"===t&&(0,a.jsx)(i.ZG,{}),"exiting"===t&&(0,a.jsx)(i.lR,{})]}),(0,a.jsx)(i.xu,{css:{display:"flex",fd:"column",gap:"$sm"},children:(0,a.jsxs)(i.xu,{css:{display:"flex",fd:"column",gap:"$xs"},children:[(0,a.jsx)(i.xv,{variant:"body",css:{color:"white"},children:s}),l]})})]})},ExitLoading=e=>{let{txHash:t}=e;return(0,a.jsxs)(TransactionSection,{icon:"exiting",heading:"Cluster is exiting",children:[(0,a.jsxs)(i.rU,{css:{fontSize:"$4",fontWeight:"$normal"},target:"_blank",href:"".concat(f.q2,"/tx/").concat(t),children:["Check Status on Beaconchain",(0,a.jsx)(i._j,{size:"sm"})]}),(0,a.jsxs)(i.rU,{css:{fontSize:"$4",fontWeight:"$normal"},target:"_blank",href:"https://docs.obol.org/next/run/running/quickstart-exit",children:["Learn More",(0,a.jsx)(i.ZJ,{size:"sm"})]})]})},SuccessfullyExited=()=>(0,a.jsx)(i.kC,{direction:"column",css:{gap:"$sm"},children:(0,a.jsx)(TransactionSection,{icon:"successfully",heading:"Cluster is successfully exited"})});var H=s(20479);let ExitClusterDialog=e=>(0,a.jsxs)(i.cd,{css:{"@bp2":{width:"460px",height:"310px"}},open:e.open,setOpen:e.setOpen,children:[(0,a.jsx)(i.$N,{css:{px:"$xl"},children:"Exit validators"}),(0,a.jsx)(i.xu,{css:{px:"$xl",py:"$lg"},children:(0,a.jsx)(i.Be,{children:"Upon exiting the Validator you will be able to withdraw the original principle & claim all rewards but this validator will no longer earn rewards."})}),(0,a.jsxs)(i.kC,{css:{px:"$xl",gap:"$sm"},children:[(0,a.jsx)(i.zx,{css:{backgroundColor:"$test",color:"$bg01"},fullWidth:!0,onClick:()=>e.setOpen(!1),children:"Cancel"}),(0,a.jsx)(i.zx,{css:{backgroundColor:"$bg03",color:"$body"},fullWidth:!0,onClick:()=>e.onConfirm(),children:"Confirm"})]})]}),F={gap:"$lg",alignItems:"flex-start",justifyContent:"flex-start",gridColumn:"span 1"},ExitClusterSection=e=>{let{clusterStatus:t,isConnectedWalletOperator:s,handleOnExit:l}=e,n=v(e=>e.claimTXHash),[o,d]=(0,r.useState)(!1);return(0,a.jsxs)(i.W2,{css:F,children:[(0,a.jsx)(H.N,{children:"Exit Validators"}),"exiting"===t?(0,a.jsx)(ExitLoading,{txHash:n}):"exited"===t?(0,a.jsx)(SuccessfullyExited,{}):(0,a.jsx)(ExitButton,{disabled:"active"!==t||!s,onClick:()=>d(!0)}),(0,a.jsx)(ExitClusterDialog,{open:o,setOpen:d,onConfirm:l})]})};var W=s(30120);let ClusterName=e=>{let{clusterDefinition:t,isLoading:s}=e;return(0,a.jsxs)(i.kC,{direction:"column",css:{gap:"$xxs"},children:[(0,a.jsx)(i.xv,{variant:"h3",children:s?(0,a.jsx)(i.Od,{variant:"title"}):null==t?void 0:t.name}),(0,a.jsx)(i.xv,{variant:"metadata",color:"body",children:s?(0,a.jsx)(i.Od,{variant:"text"}):"Created ".concat(W.ou.fromISO(null==t?void 0:t.timestamp).toRelativeCalendar()," on ").concat(W.ou.fromISO(null==t?void 0:t.timestamp).toFormat("yyyy LLL dd"))})]})},ClusterInfoCards=e=>{let{clusterStatus:t,operatorsCount:s,validatorsCount:l,activeValidatorsCount:r,isLoading:n}=e;return(0,a.jsxs)(i.kC,{css:{gap:"$lg","@sm":{flexDirection:"column"}},children:[(0,a.jsx)(i.gK,{heading:"Cluster Status",status:t,tooltipContent:"The cluster aggregate status",isLoading:!t}),(0,a.jsx)(i.gK,{heading:"Operators",content:s||"0",tooltipContent:"The number of cluster operators",isLoading:n}),null==r?(0,a.jsx)(i.gK,{heading:"Validators",content:l||"0",tooltipContent:"The number of distributed validators in this cluster",isLoading:n}):(0,a.jsx)(i.gK,{heading:"Active Validators",content:l?(0,a.jsxs)(a.Fragment,{children:[r," ",(0,a.jsxs)("span",{style:{color:"#475E64"},children:["/ ",l]})]}):"0",tooltipContent:"The active and total number of distributed validators in this cluster",isLoading:n})]})},OperatorsSection=e=>{var t;let{clusterDefinition:s,connectedAddress:r,isLoading:o}=e;return(0,a.jsx)(a.Fragment,{children:(null==s?void 0:null===(t=s.operators)||void 0===t?void 0:t.length)>0&&((0,n.Os)(null==s?void 0:s.operators)?(0,a.jsx)(i.sQ,{heading:"This cluster was not created using a Distributed Key Generation ceremony, and a single entity likely controls the validator private key(s)"}):(0,a.jsx)(l.Dq,{operators:s.operators,connectedAddress:r,creatorAddress:s.creator.address,isLoading:o}))})};var z=s(92724);let U={gap:"$lg","@sm":{flexDirection:"column",gap:"$md",alignItems:"flex-start",justifyContent:"flex-start",gridColumn:"span 2"}},ClusterDetailsContainer=e=>{var t;let{clusterDefinition:s,validators:l,connectedAddress:o,clusterStatus:d,isLoading:c}=e,{activeValidatorsCount:u}=fetchValidatorsStatusMetrics(l),h=(0,n.xs)(O(),"lockHash"),x=(0,z.TY)(e=>e.resetState),p=(0,z.TY)(e=>e.setData);return console.log(null==s?void 0:s.operators),useClusterValidators({validators:l}),(0,r.useEffect)(()=>{x()},[h,x]),(0,a.jsxs)(D,{children:[(0,a.jsx)(ClusterName,{isLoading:c,clusterDefinition:s}),(0,a.jsx)(ClusterInfoCards,{clusterStatus:d,operatorsCount:null==s?void 0:null===(t=s.operators)||void 0===t?void 0:t.length,validatorsCount:null==l?void 0:l.length,activeValidatorsCount:u,isLoading:c}),(0,a.jsx)(OperatorsSection,{clusterDefinition:s,connectedAddress:o,isLoading:c}),(0,a.jsx)(ValidatorsTableWrapper,{}),(0,a.jsx)(i.kC,{css:U,children:(0,a.jsx)(ExitClusterSection,{isConnectedWalletOperator:(0,n.XN)(o,null==s?void 0:s.operators),clusterStatus:d,handleOnExit:()=>{p({operators:null==s?void 0:s.operators,validatorsCount:null==l?void 0:l.length,threshold:null==s?void 0:s.threshold,lockHash:h}),O().push("".concat(z.xM.REQUISITES,"/?lockHash=").concat(h))}})})]})}},32890:function(e,t,s){s.d(t,{X:function(){return ErrorPageContainer}});var a=s(85893);s(67294);var i=s(61472);let ErrorPageContainer=e=>{let{children:t,css:s={}}=e;return(0,a.jsxs)(i.W2,{css:{borderRadius:0,marginTop:"$7xl",...s},children:[(0,a.jsx)(i.xv,{variant:"h4",children:"Error"}),(0,a.jsx)(i.xv,{variant:"body",children:t})]})}},92724:function(e,t,s){s.d(t,{TY:function(){return d},eI:function(){return l},xM:function(){return r}});var a=s(64529),i=s(782);let l={REQUISITES:"pre-requisites",EXIT_COMMAND:"exit-command",MONITOR:"monitor",FETCH_BROADCAST:"fetch-broadcast",QUEUE:"queue"},r={REQUISITES:"/exit/pre-requisites",EXIT_COMMAND:"/exit/exit-command",MONITOR:"/exit/monitor",FETCH_BROADCAST:"/exit/fetch-broadcast",QUEUE:"/exit/queue"},n=[{id:l.REQUISITES,status:"current",title:"Pre Requisites",href:r.REQUISITES},{id:l.EXIT_COMMAND,status:"incomplete",title:"Run Exit Command",href:r.EXIT_COMMAND},{id:l.MONITOR,status:"incomplete",title:"Monitor Partial Exits",href:r.MONITOR},{id:l.FETCH_BROADCAST,status:"incomplete",title:"Fetch & Broadcast",href:r.FETCH_BROADCAST},{id:l.QUEUE,status:"incomplete",title:"Exit Queue",href:r.QUEUE}],o={steps:n,data:null},d=(0,a.Ue)()((0,i.tJ)((e,t)=>({...o,completeStep:t=>e(e=>({steps:e.steps.map(e=>e.id===t?{...e,status:"complete"}:e)})),enableStep:s=>{let a=t().steps.find(e=>e.id===s);return e(e=>({steps:a?e.steps.map(e=>e.id===a.id?{...a,status:"current"}:e):e.steps})),a},getStepByRoute:e=>t().steps.find(t=>t.href===e)||null,getCurrentStep:()=>t().steps.find(e=>"incomplete"===e.status)||t().steps[0],setData:t=>{e(e=>({steps:e.steps.map(e=>({...e,href:"".concat(e.href,"/?lockHash=").concat(null==t?void 0:t.lockHash)})),data:t}))},resetState:()=>{e(()=>({steps:o.steps,data:o.data}))}}),{name:"exit-store",getStorage:()=>localStorage}))}}]);