(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2869],{33797:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dv",function(){return o(30364)}])},30364:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return v}});var r=o(85893),s=o(13976),n=o(61472),a=o(91997),i=o(98682),l=o(31431),c=o(11163),d=o(67294),u=o(15497);let useLockHash=e=>{let[t,o]=(0,d.useState)(null);return(0,d.useEffect)(()=>{if(e){let getLockHash=async()=>{try{let t=await (0,l.kS)("/lock/confighash/".concat(e));o(t.lock_hash)}catch(e){console.error(e.response.data.message)}};getLockHash()}},[]),{lockHash:t}};var h=o(86105),p=o(92321);let NoClusterInformation=()=>{let e=(0,c.useRouter)();return(0,r.jsxs)(n.kC,{direction:"column",css:{alignItems:"center",gap:"$md"},children:[(0,r.jsx)(n.xv,{size:"5",children:"Error: No cluster information provided, please double check the link you followed or return to the home page."}),(0,r.jsx)(n.zx,{onClick:()=>e.push({pathname:"/"}),children:"Return to start"})]})},NotConnectedWalletOrNotInvited=e=>{let{data:t,lockHash:o}=e,s=(0,c.useRouter)(),i="".concat(h.yK,"/cluster/details/?lockHash=").concat(o),l="";return l=o?"This distributed key generation ceremony has already been completed.":(0,u.YC)(null==t?void 0:t.operators)?"All operators have confirmed the terms of the cluster. Connect a wallet that is one of the operators to proceed to the key generation phase.":"You are either not invited or you need to connect your wallet",(0,r.jsxs)(n.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,r.jsxs)(n.xv,{variant:"h3",children:[(0,r.jsxs)(n.xv,{color:"obolGreen",css:{display:"inline"},children:["‘",t.name,"’"]})," Cluster"]}),(0,r.jsx)(a._R,{data:t}),(0,r.jsx)(a.Zz,{validators:t.validators}),(0,r.jsxs)(n.W2,{className:"enr-section",alignItems:"start",css:{gap:"$lg"},children:[(0,r.jsx)(n.sQ,{heading:l}),o?(0,r.jsx)(n.zx,{fullWidth:!0,onClick:()=>s.push({pathname:"".concat(i)}),children:"View the created Cluster"}):(0,r.jsx)(n.zx,{fullWidth:!0,disabled:!0,children:"Continue"})]})]})},JoinDVCluster=()=>{let e=(0,i.o)(e=>e.resetState),t=(0,i.o)(e=>e.setClusterDefinitionData),o=(0,i.o)(e=>e.completeOperatorStep),h=(0,i.o)(e=>e.enableOperatorStep),{address:v}=(0,p.m)(),f=(0,c.useRouter)(),x=(0,u.xs)(f,"configHash");x||(x=window?window.location.hash.split("#")[1]:"");let{lockHash:g}=useLockHash(x),{data:m,error:j}=(0,s.ZP)("/definition/".concat(x),l.FU,{refreshInterval:e=>(null==e?void 0:e.definition_hash)?0:1e3}),k=null==m?void 0:m.operators.find(e=>{var t;return(null==e?void 0:null===(t=e.address)||void 0===t?void 0:t.toLowerCase())===(null==v?void 0:v.toLowerCase())});if((0,u._h)(k)){o("dv-join"),o("advisories-operator");let e=h("dv-accept-config");f.push(e.href)}return((0,d.useEffect)(()=>{e()},[e]),(0,d.useEffect)(()=>{m&&t(m)},[m,t]),x&&m&&!j)?!m||v&&m.operators.some(e=>e.address.toLowerCase()===(null==v?void 0:v.toLowerCase()))?(0,r.jsxs)(n.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,r.jsxs)(n.xv,{variant:"h3",children:["You are invited to join: ",(0,r.jsxs)(n.xv,{color:"obolGreen",css:{display:"inline"},children:["‘",m.name,"’"]})," Cluster"]}),(0,r.jsxs)(n.W2,{className:"enr-section",alignItems:"start",css:{gap:"$lg"},children:[(0,r.jsxs)(n.xv,{color:"light",variant:"h5",children:["This is a proposal to operate "," ",(0,r.jsx)(n.xv,{color:"obolGreen",inline:!0,children:m.num_validators})," ".concat((0,u.Zi)("validator",m.num_validators,"s")," with\n          a group of "),(0,r.jsx)(n.xv,{color:"obolGreen",inline:!0,children:m.operators.length})," node operators as part of a\n          Distributed Validator Cluster."]}),(0,r.jsx)(n.xv,{variant:"body",children:"You will be asked to carefully review the terms and proposed participants of the cluster. Confirmation of these terms will be required through a wallet signature."}),(0,r.jsx)(n.xv,{variant:"body",children:"Taking part in a distributed validator cluster will require you to run and maintain an Ethereum validating node. Please ensure you read the following advisories carefully, and that you take the time to thoroughly understand the commitment, effort, and knowledge that will be required of you to take part in this Distributed Validator Cluster."}),(0,r.jsxs)(n.rU,{variant:"default",target:"_blank",href:"https://docs.obol.org/next/learn/charon/cluster-configuration#cluster-size-and-resilience/start/quickstart_group",children:["Quickstart Guide ",(0,r.jsx)(n.ZJ,{size:"md"})]})]}),(0,r.jsx)(a._R,{data:m}),(0,r.jsx)(a.Zz,{validators:null==m?void 0:m.validators}),(0,r.jsxs)(n.W2,{className:"enr-section",alignItems:"start",css:{gap:"$lg"},children:[(0,r.jsx)(n.xv,{color:"muted",variant:"h5",children:"Average completion time: 10 Min"}),(0,r.jsx)(n.sQ,{heading:"You will need your Charon client's ENR to continue",link:"https://docs.obol.org/next/learn/charon/cluster-configuration#cluster-size-and-resilience/start/quickstart_group#step-1-generate-an-enr",linkText:"More on ENRs",subHeading:'An ENR is an "Ethereum Node Record" used to identify your client to the other clients in the cluster'}),(0,r.jsx)(n.sQ,{heading:"All participants in the group must complete this setup to progress"}),(0,r.jsx)(n.zx,{className:"get-started",fullWidth:!0,onClick:()=>{o("dv-join");let e=h("advisories-operator");f.push(e.href)},children:"Get Started"})]})]}):(0,r.jsx)(NotConnectedWalletOrNotInvited,{data:m,lockHash:g}):(0,r.jsx)(NoClusterInformation,{})};var v=JoinDVCluster;JoinDVCluster.layout="OperatorProgressTrackerLayout"}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=33797)}),_N_E=e.O()}]);