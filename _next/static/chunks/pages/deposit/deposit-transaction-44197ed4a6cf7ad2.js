(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9045],{52489:function(t,s,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/deposit/deposit-transaction",function(){return e(32519)}])},32519:function(t,s,e){"use strict";e.r(s),e.d(s,{default:function(){return g}});var a=e(85893),n=e(67294),o=e(61472),i=e(98682),c=e(34695),r=e(26902),l=e(86105),d=e(71993);let DepositTxAction=t=>{let{pubKey:s,onDeposit:e}=t,r=(0,i.o)(t=>t.getDepositItem(s)),u=(0,i.o)(t=>t.depositData),x=Object.keys(u).some(t=>u[t].transactionStatus===c.LN.STARTED),p=(0,n.useCallback)(()=>r.depositStatus===c.Er.READY_FOR_DEPOSIT||r.transactionStatus===c.LN.READY||r.transactionStatus===c.LN.PENDING||r.transactionStatus===c.LN.REJECTED||r.transactionStatus===c.LN.FAILED?(0,a.jsx)(o.zx,{fullWidth:!0,onClick:()=>e(s),color:"secondary",css:{backgroundColor:"$bg04","&:hover":{backgroundColor:"$create",color:"$textCreateHover"}},disabled:r.transactionStatus===c.LN.PENDING||x,children:r.transactionStatus===c.LN.REJECTED||r.transactionStatus===c.LN.FAILED?"Try Again":"Deposit"}):r.depositStatus===c.Er.ALREADY_DEPOSITED?(0,a.jsx)(d.j,{link:"".concat(l.q2,"/validator/0x").concat(s),title:"Beaconchain"}):r.transactionStatus===c.LN.STARTED?(0,a.jsx)(d.j,{link:"".concat(l.jX,"/tx/").concat(r.txHash),title:"Etherscan"}):r.transactionStatus===c.LN.SUCCEEDED?(0,a.jsxs)(o.kC,{direction:"column",css:{alignContent:"center"},children:[(0,a.jsx)(d.j,{link:"".concat(l.q2,"/validator/0x").concat(s),title:"Beaconchain"}),(0,a.jsx)(d.j,{link:"".concat(l.uM,"/validator/0x").concat(s),title:"Beaconscan"})]}):void 0,[r.depositStatus,r.transactionStatus,r.txHash,e,s]);return(0,a.jsx)(o.xu,{css:{display:"flex",gap:"$xxs",alignItems:"center"},children:p()})};var u=e(15497),x=e(12606),p=e(24967),h=e(37122),j=e(27773);let D=[{accessorKey:"validatorPublicKey",header:"Validator Public Key",css:{maxWidth:"70px","@sm":{width:"auto",maxWidth:"auto"},"@md":{maxWidth:"100px"}}},{accessorKey:"status",header:"Status"},{accessorKey:"action",header:"Action"}],DepositTransaction=()=>{let t=(0,h.Z)(),s=(0,i.o)(t=>t.depositData),e=(0,i.o)(t=>t.updateTxStatus),d=(0,i.o)(t=>t.updateTxStatuses),g=(0,i.o)(t=>t.updateDepositStatus),E=(0,i.o)(t=>t.updateDepositStatuses),b=(0,i.o)(t=>t.getDepositItem),[m,k]=(0,n.useState)(!1),S=(0,j.t)(),y=Object.keys(null!=s?s:{}).length,C=(0,n.useMemo)(()=>Object.values(s).filter(t=>t.depositStatus===c.Er.READY_FOR_DEPOSIT),[s]),handleOnDeposit=async s=>{let a=b(s);await (0,u._6)(a,S,t,e,g)},handleOnDepositAll=async()=>{for(let s=0;s<C.length;s+=512){let e=C.slice(s,s+512);await (0,u.kB)(e,S,t,d,E)}};if(!s&&!m)return(0,a.jsxs)(o.xv,{variant:"h5",children:["Go to upload deposit step to upload the corresponding data step.. ",(0,a.jsx)(o.rU,{href:"/deposit/upload-deposits",children:"Upload Deposit Data"})]});let v=(0,a.jsxs)(o.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,a.jsx)(x.qN,{heading:"Your stake has reached the deposit contract",subHeading:(0,a.jsxs)(o.xu,{css:{px:"$xl"},children:["Youâ€™ve successfully set up a ",(0,a.jsx)(o.xv,{css:{display:"inline"},color:"obolGreen",children:"Distributed Validator"}),"!\n            Please ensure your cluster is healthy and ready for validator activation."]})}),(0,a.jsxs)(o.W2,{className:"success-section",alignItems:"start",css:{gap:"$xl"},children:[(0,a.jsx)(o.xv,{variant:"h4",children:"Overview"}),(0,a.jsxs)(o.kC,{css:{gap:"$2xl"},children:[(0,a.jsx)(x.Mz,{heading:"Your Stake",subHeading:(0,a.jsxs)(o.kC,{css:{gap:"$xxs"},children:[(0,a.jsx)(o.Ee,{src:"/assets/eth-icon.png",alt:"eth",width:24,height:24}),"".concat(y*l.lc," Eth")]})}),(0,a.jsx)(x.Mz,{heading:"Your Validators",subHeading:"".concat(y)})]})]})]});return m?v:(0,a.jsxs)(o.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,a.jsx)(o.xv,{variant:"h3",children:"Transactions"}),(0,a.jsx)(o.kC,{direction:"column",css:{gap:"$2xl"},children:(0,a.jsxs)(o.W2,{dir:"col",className:"transactions-section",alignItems:"start",children:[(0,a.jsxs)(o.kC,{css:{justifyContent:"space-between",flexWrap:"wrap",gap:"$xs"},children:[(0,a.jsxs)(o.kC,{direction:"column",css:{gap:"$xxxs",width:"340px"},children:[(0,a.jsx)(o.xv,{variant:"h4",children:"Confirm Deposit"}),(0,a.jsx)(o.xv,{size:"4",color:"muted",children:"Submit a transaction to finish your deposit"})]}),(0,a.jsx)(p.TT,{name:"deposit_all",children:C.length>1&&(0,a.jsx)(o.zx,{onClick:()=>handleOnDepositAll(),ghost:!0,css:{color:"$obolGreen",fontSize:"$4",p:0,height:"100%",textTransform:"uppercase"},children:"Deposit All"})})]}),(0,a.jsxs)(o.kC,{direction:"column",css:{gap:"$xl"},children:[(0,a.jsxs)(o.xu,{className:"deposit-table-container",css:{display:"flex",flexDirection:"column",p:"$sm",backgroundColor:"$bg03",borderRadius:"$1",gap:"$lg","& table":{backgroundColor:"transparent"},"& table tbody td":{whiteSpace:"normal"}},children:[(0,a.jsx)(o.xv,{variant:"h5",children:"Key List"}),(0,a.jsx)(o.iA,{rows:Object.keys(s).map(t=>({validatorPublicKey:(0,u.zN)(t,[0,10],10),status:(0,a.jsx)(r.D,{pubKey:t}),action:(0,a.jsx)(DepositTxAction,{pubKey:t,onDeposit:handleOnDeposit})})),columns:D})]}),(0,a.jsx)(x.wA,{onBackHref:"/deposit/summary",onContinue:()=>{k(!0)},disableContinue:Object.keys(s).some(t=>null==s[t].txHash&&s[t].transactionStatus!==c.LN.SUCCEEDED)})]})]})})]})};var g=DepositTransaction;DepositTransaction.layout="DepositProgressTrackerLayout"}},function(t){t.O(0,[9774,2888,179],function(){return t(t.s=52489)}),_N_E=t.O()}]);